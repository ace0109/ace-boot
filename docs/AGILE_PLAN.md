# ACE-Boot 敏捷开发实施计划

## 核心原则

### 敏捷开发理念
- **小步快跑**：每个任务控制在2-4小时内完成
- **持续验证**：每步必须通过测试才能继续
- **快速反馈**：及时调整方向，避免大规模返工
- **可工作软件**：每次迭代都产出可运行的软件
- **响应变化**：根据实际情况灵活调整计划

### 开发流程
```
需求分析 → 任务拆分 → 编码实现 → 单元测试 → 集成测试 → 代码审查 → 合并主干
    ↑                                                                    ↓
    └────────────────── 发现问题，快速调整 ←─────────────────────────────┘
```

## Sprint 规划（2周为一个Sprint）

### Sprint 0: 项目初始化（当前Sprint）

#### 目标
建立基础项目结构，确保开发环境就绪

#### User Story 1: 作为开发者，我需要一个可运行的Spring Boot项目
**任务拆解：**
```
Task 1.1: 创建单模块Spring Boot项目 (2h)
├── 验收标准：
│   ✅ 项目能正常启动
│   ✅ 访问 http://localhost:8080 返回欢迎信息
│   ✅ mvn clean test 通过
└── 状态：已完成

Task 1.2: 添加基础的健康检查端点 (1h)
├── 验收标准：
│   ✅ /actuator/health 返回 {"status": "UP"}
│   ✅ 单元测试覆盖率 > 80%
└── 状态：已完成

Task 1.3: 配置开发环境profile (1h)
├── 验收标准：
│   □ application-dev.yml 配置完成
│   □ 日志级别正确配置
│   □ 本地开发可正常启动
└── 状态：待开始

Task 1.4: 配置质量保障工具链 (3h) 【新增-基于AI讨论共识】
├── 验收标准：
│   □ JaCoCo插件配置完成
│   □ 覆盖率阈值设置（核心工具100%，辅助90%）
│   □ Checkstyle配置（阿里巴巴规范）
│   □ CI集成质量检查
└── 状态：待开始
```

#### User Story 2: 作为开发者，我需要清晰的项目文档
**任务拆解：**
```
Task 2.1: 创建项目README (2h)
├── 验收标准：
│   ✅ 包含项目简介、快速开始
│   ✅ 技术栈说明清晰
└── 状态：已完成

Task 2.2: 创建架构设计文档 (3h)
├── 验收标准：
│   ✅ DDD分层说明清晰
│   ✅ 核心模块职责明确
└── 状态：已完成

Task 2.3: 创建敏捷开发计划 (2h)
├── 验收标准：
│   ✅ Sprint划分合理
│   ✅ 每个任务有明确验收标准
└── 状态：进行中
```

---

### Sprint 1: 核心工具模块（第1-2周）

#### 目标
建立基础工具类和统一响应格式

#### User Story 3: 作为开发者，我需要统一的API响应格式
**任务拆解：**
```
Task 3.1: 将项目转换为Maven多模块 - 【细化为子任务】

Task 3.1.1: 修改根pom.xml为pom打包方式 (1h)
├── 验收标准：
│   □ packaging改为pom
│   □ 定义modules节点
│   □ mvn clean compile 成功
└── 状态：待开始

Task 3.1.2: 创建ace-boot-common基础模块 (2h)
├── 验收标准：
│   □ 模块pom.xml配置正确
│   □ 包结构规范
│   □ 模块可独立编译
└── 状态：待开始

Task 3.1.3: 迁移现有代码到ace-boot-samples (2h)
├── 验收标准：
│   □ 代码迁移完整
│   □ 依赖关系正确
│   □ samples模块可独立运行
└── 状态：待开始

Task 3.1.4: 多模块结构冒烟测试 (1h)
├── 验收标准：
│   □ mvn clean install 成功
│   □ samples模块启动正常
│   □ 健康检查端点工作
└── 状态：待开始

Task 3.2: 创建统一响应类Result (2h)
├── 实现步骤：
│   1. 在common模块创建Result类
│   2. 定义成功/失败静态方法
│   3. 编写单元测试
├── 验收标准：
│   □ Result类支持泛型
│   □ 包含code、message、data、timestamp
│   □ 单元测试100%覆盖
└── 状态：待开始

Task 3.3: 实现全局异常处理 (3h)
├── 实现步骤：
│   1. 创建BaseException基类
│   2. 创建GlobalExceptionHandler
│   3. 集成到samples项目验证
├── 验收标准：
│   □ 所有异常统一返回Result格式
│   □ 支持自定义业务异常
│   □ 集成测试通过
└── 状态：待开始

Task 3.4: 添加请求日志拦截器 (2h)
├── 实现步骤：
│   1. 创建RequestLogInterceptor
│   2. 记录请求参数和响应时间
│   3. 配置到samples项目
├── 验收标准：
│   □ 日志格式规范
│   □ 不影响性能（<10ms）
│   □ 支持配置开关
└── 状态：待开始
```

#### User Story 4: 作为开发者，我需要常用的工具类
**任务拆解：**
```
Task 4.1: 创建字符串工具类 (1h)
├── 验收标准：
│   □ 包含常用字符串操作
│   □ 单元测试覆盖率100%
└── 状态：待开始

Task 4.2: 创建日期工具类 (1h)
├── 验收标准：
│   □ 支持多种日期格式
│   □ 线程安全
│   □ 单元测试覆盖率100%
└── 状态：待开始

Task 4.3: 创建JSON工具类 (1h)
├── 验收标准：
│   □ 基于Jackson封装
│   □ 支持泛型转换
│   □ 单元测试覆盖率100%
└── 状态：待开始
```

---

### Sprint 2: Web基础能力（第3-4周）

#### 目标
完成Web层基础配置和增强功能

#### User Story 5: 作为开发者，我需要Web自动配置
**任务拆解：**
```
Task 5.1: 创建ace-boot-starter-web模块 (2h)
├── 验收标准：
│   □ 自动配置类正确加载
│   □ META-INF/spring.factories配置
│   □ 可被其他模块引用
└── 状态：待开始

Task 5.2: 集成参数验证 (2h)
├── 验收标准：
│   □ validation自动生效
│   □ 错误信息友好
│   □ 支持自定义验证注解
└── 状态：待开始

Task 5.3: 配置CORS支持 (1h)
├── 验收标准：
│   □ 跨域请求正常
│   □ 安全配置合理
│   □ 可通过配置调整
└── 状态：待开始

Task 5.4: 添加接口版本控制 (2h)
├── 验收标准：
│   □ 支持@ApiVersion注解
│   □ URL版本识别正确
│   □ 向后兼容
└── 状态：待开始
```

#### User Story 6: 作为开发者，我需要API文档
**任务拆解：**
```
Task 6.1: 集成SpringDoc OpenAPI (2h)
├── 验收标准：
│   □ Swagger UI可访问
│   □ 接口文档自动生成
│   □ 支持在线调试
└── 状态：待开始

Task 6.2: 配置文档增强 (2h)
├── 验收标准：
│   □ 分组显示
│   □ 认证配置
│   □ 示例数据完整
└── 状态：待开始
```

---

### Sprint 3: 认证授权（第5-6周）

#### 目标
实现JWT认证和基础权限控制

#### User Story 7: 作为用户，我需要安全的身份认证
**任务拆解：**
```
Task 7.1: 创建ace-boot-starter-security模块 (2h)
├── 验收标准：
│   □ Spring Security配置正确
│   □ 模块可独立使用
└── 状态：待开始

Task 7.2: 实现JWT工具类 (3h)
├── 验收标准：
│   □ Token生成/解析正确
│   □ 过期时间验证
│   □ 签名验证安全
│   □ 单元测试完整
└── 状态：待开始

Task 7.3: 实现认证过滤器 (3h)
├── 验收标准：
│   □ Token自动解析
│   □ 用户信息存入上下文
│   □ 异常处理完善
└── 状态：待开始

Task 7.4: 创建登录接口示例 (2h)
├── 验收标准：
│   □ 登录返回Token
│   □ Token可用于后续请求
│   □ 集成测试通过
└── 状态：待开始
```

#### User Story 8: 作为管理员，我需要权限控制
**任务拆解：**
```
Task 8.1: 设计RBAC模型 (2h)
├── 验收标准：
│   □ 用户-角色-权限模型清晰
│   □ 数据库表设计合理
└── 状态：待开始

Task 8.2: 实现权限注解 (3h)
├── 验收标准：
│   □ @RequirePermission注解
│   □ 支持方法级控制
│   □ 权限验证准确
└── 状态：待开始

Task 8.3: 实现权限拦截器 (2h)
├── 验收标准：
│   □ 权限验证通过/拒绝
│   □ 错误信息明确
│   □ 性能影响小
└── 状态：待开始
```

---

### Sprint 4: 数据访问层（第7-8周）

#### 目标
集成MyBatis Plus，实现数据访问基础设施

#### User Story 9: 作为开发者，我需要便捷的数据库操作
**任务拆解：**
```
Task 9.1: 创建ace-boot-starter-mybatis模块 (2h)
├── 验收标准：
│   □ MyBatis Plus配置正确
│   □ 分页插件工作正常
└── 状态：待开始

Task 9.2: 实现基础Entity (2h)
├── 验收标准：
│   □ BaseEntity包含通用字段
│   □ 自动填充创建/更新时间
│   □ 逻辑删除支持
└── 状态：待开始

Task 9.3: 实现通用Mapper (1h)
├── 验收标准：
│   □ BaseMapper扩展功能
│   □ 批量操作支持
└── 状态：待开始

Task 9.4: 添加多数据源支持 (4h)
├── 验收标准：
│   □ 动态数据源切换
│   □ 注解方式使用
│   □ 事务正确处理
│   □ 集成测试完整
└── 状态：待开始
```

#### User Story 10: 作为开发者，我需要数据库审计
**任务拆解：**
```
Task 10.1: 实现审计字段自动填充 (2h)
├── 验收标准：
│   □ created_by/updated_by自动填充
│   □ 从上下文获取用户信息
└── 状态：待开始

Task 10.2: 实现数据变更记录 (3h)
├── 验收标准：
│   □ 记录变更前后数据
│   □ 支持配置开关
│   □ 不影响主流程性能
└── 状态：待开始
```

---

### Sprint 5: 缓存支持（第9-10周）

#### 目标
集成Redis，提供缓存能力

#### User Story 11: 作为开发者，我需要缓存支持
**任务拆解：**
```
Task 11.1: 创建ace-boot-starter-redis模块 (2h)
├── 验收标准：
│   □ Redis连接配置正确
│   □ 序列化配置合理
└── 状态：待开始

Task 11.2: 实现缓存注解增强 (3h)
├── 验收标准：
│   □ @Cacheable增强
│   □ 支持TTL配置
│   □ 缓存key规范
└── 状态：待开始

Task 11.3: 实现分布式锁 (3h)
├── 验收标准：
│   □ 基于Redis实现
│   □ 支持超时机制
│   □ 可重入锁
│   □ 单元测试完整
└── 状态：待开始

Task 11.4: 实现缓存工具类 (2h)
├── 验收标准：
│   □ 常用操作封装
│   □ 批量操作支持
│   □ 异常处理完善
└── 状态：待开始
```

---

### Sprint 6: DDD示例（第11-12周）

#### 目标
创建完整的DDD示例项目

#### User Story 12: 作为开发者，我需要DDD最佳实践示例
**任务拆解：**
```
Task 12.1: 创建用户管理领域模型 (4h)
├── 验收标准：
│   □ User聚合根完整
│   □ 值对象设计合理
│   □ 领域服务实现
└── 状态：待开始

Task 12.2: 实现应用服务层 (3h)
├── 验收标准：
│   □ 用例编排清晰
│   □ DTO转换正确
│   □ 事务边界合理
└── 状态：待开始

Task 12.3: 实现接口层 (2h)
├── 验收标准：
│   □ RESTful API设计
│   □ 参数验证完整
│   □ 错误处理规范
└── 状态：待开始

Task 12.4: 实现基础设施层 (3h)
├── 验收标准：
│   □ 仓储实现完整
│   □ 数据转换正确
│   □ 外部服务模拟
└── 状态：待开始

Task 12.5: 编写集成测试 (2h)
├── 验收标准：
│   □ 主要流程覆盖
│   □ 测试数据隔离
│   □ 断言完整
└── 状态：待开始
```

---

## 验收标准定义

### 代码质量标准
```yaml
单元测试:
  核心模块覆盖率: ">= 80%"
  工具类覆盖率: "100%"
  测试执行时间: "< 30s"

代码规范:
  checkstyle: "通过"
  sonar扫描: "无Critical问题"
  注释覆盖: "公共API 100%"

性能要求:
  启动时间: "< 10s"
  接口响应: "< 200ms (P99)"
  内存占用: "< 512MB"
```

### 每个Task的DoD（Definition of Done）
1. ✅ 代码实现完成
2. ✅ 单元测试编写并通过
3. ✅ 代码审查通过
4. ✅ 集成测试通过（如适用）
5. ✅ 文档更新（如适用）
6. ✅ 合并到主分支

### Sprint评审标准
- 所有计划的User Story完成
- 演示环境可正常运行
- 无阻塞性Bug
- 文档同步更新

## 风险管理

### 技术债务控制
- 每个Sprint预留20%时间处理技术债务
- 及时重构，避免债务累积
- 保持代码整洁

### 进度风险缓解
- 每个Task预估时间包含30%缓冲
- 优先完成核心功能
- 可根据实际情况调整范围

## 持续改进

### Sprint回顾会议
每个Sprint结束后回答：
1. 什么做得好？
2. 什么需要改进？
3. 下个Sprint如何改进？

### 度量指标
```
速度指标:
  - 每Sprint完成的Story Point
  - Task平均完成时间

质量指标:
  - 缺陷率
  - 测试覆盖率
  - 代码复杂度

效率指标:
  - 返工率
  - 阻塞时间
  - CI/CD成功率
```

## 工具支持

### 开发工具
- IDE: IntelliJ IDEA
- 构建: Maven 3.8+
- 版本控制: Git
- CI/CD: GitHub Actions / Jenkins

### 项目管理
- 任务跟踪: GitHub Issues / JIRA
- 文档: Markdown
- 沟通: 钉钉 / 企业微信

## 快速参考

### 每日工作流程
```bash
# 1. 拉取最新代码
git pull origin main

# 2. 创建功能分支
git checkout -b feature/task-x.x

# 3. 开发和测试
mvn clean test

# 4. 提交代码
git add .
git commit -m "feat: 完成Task x.x"

# 5. 推送并创建PR
git push origin feature/task-x.x
```

### 常用命令
```bash
# 运行单个测试
mvn test -Dtest=TestClassName#methodName

# 跳过测试构建
mvn clean install -DskipTests

# 只构建某个模块
mvn clean install -pl module-name -am

# 查看依赖树
mvn dependency:tree
```

---

## 注意事项

1. **小步快跑**：宁可步子小，不可步子乱
2. **测试先行**：写代码前先想测试怎么写
3. **及时重构**：发现问题立即改进
4. **保持沟通**：遇到阻塞及时反馈
5. **文档同步**：代码和文档同步更新

## 能力与User Story对照表

基于AI讨论共识添加，用于追踪功能实现状态：

| 核心能力 | 对应User Story | 所在Sprint | 当前状态 |
|---------|---------------|------------|----------|
| 健康检查 | Task 1.2 | Sprint 0 | 🟢 已完成 |
| 质量工具链 | Task 1.4 | Sprint 0 | 🔴 未开始 |
| Maven多模块 | Task 3.1.* | Sprint 1 | 🔴 未开始 |
| 统一响应格式 | Task 3.2 | Sprint 1 | 🔴 未开始 |
| 全局异常处理 | Task 3.3 | Sprint 1 | 🔴 未开始 |
| JWT认证 | Task 7.* | Sprint 3 | 🔴 未开始 |
| RBAC权限 | Task 8.* | Sprint 3 | 🔴 未开始 |
| MyBatis Plus | Task 9.* | Sprint 4 | 🔴 未开始 |
| Redis缓存 | Task 11.* | Sprint 5 | 🔴 未开始 |
| DDD示例 | Task 12.* | Sprint 6 | 🔴 未开始 |

**状态更新规则**：
- 任务开始时更新为 🟡 开发中
- 任务完成并测试通过后更新为 🟢 已完成
- 状态变更需同步更新 ARCHITECTURE.md 中的模块状态

---

文档版本：v2.0.0（敏捷版）
创建日期：2024-11-06
最后更新：2024-11-06
负责人：ACE-Boot Team